!function(n){function f(n){return""===n||n&&n.charCodeAt&&n.substr}function p(n){return e?e(n):"[object Array]"===t.call(n)}function l(n){return"[object Object]"===t.call(n)}function m(n,r){var e;n=n||{},r=r||{};for(e in r)r.hasOwnProperty(e)&&null==n[e]&&(n[e]=r[e]);return n}function d(n,r,e){var t,o,a=[];if(!n)return a;if(i&&n.map===i)return n.map(r,e);for(t=0,o=n.length;t<o;t++)a[t]=r.call(e,n[t],t,n);return a}function g(n,r){return n=Math.round(Math.abs(n)),isNaN(n)?r:n}function h(n){var r=y.settings.currency.format;return"function"==typeof n&&(n=n()),f(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:n&&n.pos&&n.pos.match("%v")?n:f(r)?y.settings.currency.format={pos:r,neg:r.replace("%v","-%v"),zero:r}:r}var r,y={version:"0.3.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},i=Array.prototype.map,e=Array.isArray,t=Object.prototype.toString,b=y.unformat=y.parse=function(n,r){if(p(n))return d(n,function(n){return b(n,r)});if("number"==typeof(n=n||0))return n;r=r||".";var e=RegExp("[^0-9-"+r+"]",["g"]);e=parseFloat((""+n).replace(/\((.*)\)/,"-$1").replace(e,"").replace(r,"."));return isNaN(e)?0:e},s=y.toFixed=function(n,r){r=g(r,y.settings.number.precision);var e=Math.pow(10,r);return(Math.round(y.unformat(n)*e)/e).toFixed(r)},v=y.formatNumber=function(n,r,e,t){if(p(n))return d(n,function(n){return v(n,r,e,t)});n=b(n);var o=m(l(r)?r:{precision:r,thousand:e,decimal:t},y.settings.number),a=g(o.precision),i=n<0?"-":"",u=parseInt(s(Math.abs(n||0),a),10)+"",c=3<u.length?u.length%3:0;return i+(c?u.substr(0,c)+o.thousand:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(a?o.decimal+s(Math.abs(n),a).split(".")[1]:"")},c=y.formatMoney=function(n,r,e,t,o,a){if(p(n))return d(n,function(n){return c(n,r,e,t,o,a)});n=b(n);var i=m(l(r)?r:{symbol:r,precision:e,thousand:t,decimal:o,format:a},y.settings.currency),u=h(i.format);return(0<n?u.pos:n<0?u.neg:u.zero).replace("%s",i.symbol).replace("%v",v(Math.abs(n),g(i.precision),i.thousand,i.decimal))};y.formatColumn=function(n,r,e,t,o,a){if(!n)return[];var i=m(l(r)?r:{symbol:r,precision:e,thousand:t,decimal:o,format:a},y.settings.currency),u=h(i.format),c=u.pos.indexOf("%s")<u.pos.indexOf("%v"),s=0;n=d(n,function(n){return p(n)?y.formatColumn(n,i):((n=(0<(n=b(n))?u.pos:n<0?u.neg:u.zero).replace("%s",i.symbol).replace("%v",v(Math.abs(n),g(i.precision),i.thousand,i.decimal))).length>s&&(s=n.length),n)});return d(n,function(n){return f(n)&&n.length<s?c?n.replace(i.symbol,i.symbol+Array(s-n.length+1).join(" ")):Array(s-n.length+1).join(" ")+n:n})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports.accounting=y):"function"==typeof define&&define.amd?define([],function(){return y}):(y.noConflict=(r=n.accounting,function(){return n.accounting=r,y.noConflict=void 0,y}),n.accounting=y)}(this);
